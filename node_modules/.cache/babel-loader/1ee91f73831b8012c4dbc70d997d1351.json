{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\ASUS\\\\Desktop\\\\FE\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from'react';import{useState}from'react';import logo from'../../../../images/logo.png';import'./Buy.css';import{useMetaMask}from'metamask-react';import{ethers}from'ethers';import ErrorMessage from'./ErrorMessage';import TxList from'./TxList';import Swal from'sweetalert2';var startPayment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var setError,setTxs,ether,addr,provider,signer,tx;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError=_ref.setError,setTxs=_ref.setTxs,ether=_ref.ether,addr=_ref.addr;_context.prev=1;if(window.ethereum){_context.next=4;break;}throw new Error('No crypto wallet found. Please install it.');case 4:_context.next=6;return window.ethereum.send('eth_requestAccounts');case 6:provider=new ethers.providers.Web3Provider(window.ethereum);signer=provider.getSigner();ethers.utils.getAddress(addr);_context.next=11;return signer.sendTransaction({to:addr,value:ethers.utils.parseEther(ether)});case 11:tx=_context.sent;Swal.fire('Success!','Thank you!','success').then(function(){window.location.reload();});console.log({ether:ether,addr:addr});console.log({addr:addr});console.log(tx);setTxs([tx]);_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](1);setError(_context.t0.message);case 22:case\"end\":return _context.stop();}}},_callee,null,[[1,19]]);}));return function startPayment(_x){return _ref2.apply(this,arguments);};}();var Buy=function Buy(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),txs=_useState4[0],setTxs=_useState4[1];var _useMetaMask=useMetaMask(),status=_useMetaMask.status,connect=_useMetaMask.connect,account=_useMetaMask.account;var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setValue=_useState6[1];var onChange=function onChange(event){setValue(event.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();data=new FormData(e.target);setError();_context2.next=5;return startPayment({setError:setError,setTxs:setTxs,from:data.get('from'),ether:data.get('ether'),addr:data.get('addr')});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"buy-logo\"},/*#__PURE__*/React.createElement(\"img\",{src:logo,alt:\"\",width:\"100px\",height:\"100px\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"buy\"},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"form_wrapper\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"title_container\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Buy YGO Token\"),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",width:\"10px\",className:\"connect\",onClick:connect,value:status==='connected'?'WELLCOME TO YGO':'CONNECT'})),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"row clearfix\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col_half\"},/*#__PURE__*/React.createElement(\"label\",null,\"Your Address\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input_field\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"from\",placeholder:\"from Address\",value:account,readOnly:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col_half\"},/*#__PURE__*/React.createElement(\"label\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input_field\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",name:\"ether\",placeholder:\"Amount in ETH\",onChange:onChange,step:\"0.1\",min:\"0.1\",max:\"1\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col_hall\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input_field\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"addr\",value:\"0x1c7ea8562336494788a89a4f3e49c1717c57010b\",style:{display:'none'}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"input_field\"},\"YGO Token:  \",value*100000),/*#__PURE__*/React.createElement(\"div\",{className:\"input_field\"},/*#__PURE__*/React.createElement(ErrorMessage,{message:error})),/*#__PURE__*/React.createElement(\"div\",{className:\"success\"},/*#__PURE__*/React.createElement(TxList,{txs:txs})),/*#__PURE__*/React.createElement(\"div\",{className:\"btn-button\"},/*#__PURE__*/React.createElement(\"button\",{className:\"button\",type:\"submit\"},\"Pay now\"))))))));};export default Buy;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/FE/src/components/pages/mainpages/buy/Buy.js"],"names":["React","useState","logo","useMetaMask","ethers","ErrorMessage","TxList","Swal","startPayment","setError","setTxs","ether","addr","window","ethereum","Error","send","provider","providers","Web3Provider","signer","getSigner","utils","getAddress","sendTransaction","to","value","parseEther","tx","fire","then","location","reload","console","log","message","Buy","error","txs","status","connect","account","setValue","onChange","event","target","handleSubmit","e","preventDefault","data","FormData","from","get","display"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { useState } from 'react';\r\nimport logo from '../../../../images/logo.png'\r\nimport './Buy.css'\r\nimport { useMetaMask } from 'metamask-react';\r\nimport { ethers } from 'ethers';\r\nimport ErrorMessage from './ErrorMessage';\r\nimport TxList from './TxList';\r\nimport Swal from 'sweetalert2';\r\n\r\n\r\nconst startPayment = async ({ setError, setTxs, ether, addr }) => {\r\n    try {\r\n        if (!window.ethereum)\r\n            throw new Error('No crypto wallet found. Please install it.');\r\n\r\n        await window.ethereum.send('eth_requestAccounts');\r\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n        const signer = provider.getSigner();\r\n        ethers.utils.getAddress(addr);\r\n        const tx = await signer.sendTransaction({\r\n\r\n            to: addr,\r\n            value: ethers.utils.parseEther(ether),\r\n        });\r\n        Swal.fire(\r\n            'Success!',\r\n            'Thank you!',\r\n            'success').then(function () {\r\n                window.location.reload();\r\n            });\r\n        console.log({ ether, addr });\r\n        console.log({ addr });\r\n        console.log(tx);\r\n        setTxs([tx]);\r\n    } catch (err) {\r\n        setError(err.message);\r\n    }\r\n};\r\n\r\n\r\nconst Buy = () => {\r\n    const [error, setError] = useState();\r\n    const [txs, setTxs] = useState([]);\r\n    const { status, connect, account } = useMetaMask();\r\n\r\n    const [value, setValue] = useState('');\r\n\r\n    const onChange = (event) => {\r\n        setValue(event.target.value);\r\n    };\r\n\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        const data = new FormData(e.target);\r\n        setError();\r\n        await startPayment({\r\n            setError,\r\n            setTxs,\r\n            from: data.get('from'),\r\n            ether: data.get('ether'),\r\n            addr: data.get('addr'),\r\n        });\r\n    };\r\n    return (\r\n        <>\r\n            <div className='buy-logo'>\r\n                <img src={logo} alt=\"\" width=\"100px\" height=\"100px\" />\r\n            </div>\r\n            <div className='buy'>\r\n                <>\r\n                    <div className=\"form_wrapper\">\r\n                        <div className=\"form_container\">\r\n                            <div className=\"title_container\">\r\n                                <h2>Buy YGO Token</h2>\r\n                                <input type=\"submit\" width=\"10px\" className='connect' onClick={connect} value={status === 'connected' ? 'WELLCOME TO YGO' : 'CONNECT'} />\r\n                            </div>\r\n                            <form onSubmit={handleSubmit} >\r\n                                <div className=\"row clearfix\">\r\n                                    <div className=\"col_half\">\r\n                                        <label>Your Address</label>\r\n                                        <div className=\"input_field\">\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                name='from'\r\n                                                placeholder='from Address'\r\n                                                value={account}\r\n                                                readOnly\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col_half\">\r\n                                        <label>Amount</label>\r\n                                        <div className=\"input_field\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                name='ether'\r\n                                                placeholder='Amount in ETH'\r\n                                                onChange={onChange}\r\n                                                step=\"0.1\" min=\"0.1\" max=\"1\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col_hall\">\r\n                                        <div className=\"input_field\">\r\n                                            <input type=\"text\"\r\n                                                name='addr'\r\n                                                value='0x1c7ea8562336494788a89a4f3e49c1717c57010b' style={{ display: 'none' }} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"input_field\" >\r\n                                    YGO Token:  {value * 100000}\r\n                                </div>\r\n                                {/* <SlideHome /> */}\r\n                                <div className=\"input_field\" >\r\n                                    <ErrorMessage message={error} />\r\n                                </div>\r\n                                <div className=\"success\" >\r\n                                    <TxList txs={txs} />\r\n                                </div>\r\n\r\n                                <div className='btn-button'>\r\n                                    <button className=\"button\"\r\n                                        type='submit'>\r\n                                        Pay now\r\n                                    </button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Buy;\r\n"]},"metadata":{},"sourceType":"module"}